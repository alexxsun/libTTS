cmake_minimum_required(VERSION 3.9)
message(STATUS "IOSupport starts...")

# --- Find the LASlib package ---
# This single command replaces all the manual path searching.
# CMake will automatically look in your Conda environment.
# 'REQUIRED' makes the build fail with a clear error if LASlib isn't found.
find_package(LASlib REQUIRED)

message(STATUS "Found LASlib package")

# --- Create the Interface Library ---
add_library(libIOSUPPORT INTERFACE)

# Add the local directory for happly.h
target_include_directories(libIOSUPPORT
    INTERFACE
        ${CMAKE_CURRENT_SOURCE_DIR}
)

# Link against the imported target provided by the LASlib package.
# This single command correctly sets up include directories and the library link.
# As defined in the package's .cmake files, the target is named "LASlib".
target_link_libraries(libIOSUPPORT
    INTERFACE
        LASlib
)

message(STATUS "IOSupport ends...")